include ../../_sort-header
include ../../_pagination

.table-responsive
  table.table.table-hover.table-bordered
    thead.thead-dark
      tr
        th(scope="col")
          +sortHeader('name', 'Name', '#table-domains')
        th(scope="col")
          +sortHeader('is_global', 'Global', '#table-domains')
        th(scope="col")
          +sortHeader('plan', 'Plan', '#table-domains')
        th(scope="col")
          +sortHeader('max_recipients_per_alias', 'Max Recipients', '#table-domains')
        th(scope="col").text-center.align-middle= t("Actions")
      tbody
        if domains.length === 0
          tr
            td(colspan="5").alert.alert-info
              = t("No domains exist for that search.")
        else
          each domain in domains
            tr
              td.align-middle
                div: code= domain.name
              td.markdown-body.ml-0.mr-0.align-middle.text-center
                if domain.is_global
                  i.fa.fa-fw.fa-check.fa-2x.text-success
              td.align-middle.text-center
                = t(titleize(humanize(domain.plan)))
              td.align-middle.text-center
                form(
                  action=l(`/admin/domains/${domain.id}`),
                  method="POST",
                  autocomplete="off"
                ).ajax-form.confirm-prompt.d-inline-block
                  input(type="hidden", name="_csrf", value=ctx.csrf)
                  input(type="hidden", name="_method", value="PUT")
                  .input-group
                    input(
                      type="number",
                      min=0,
                      max=1000,
                      step=10,
                      name="max_recipients_per_alias",
                      value=domain.max_recipients_per_alias
                    ).form-control
                    .input-group-append
                      button(
                        type="submit",
                        data-toggle="tooltip",
                        data-title=t("Update")
                      ).btn.btn-sm.btn-dark: i.fa.fa-fw.fa-save
              td.align-middle
                div(role="group", aria-label=t("Actions")).btn-group
                  form(
                    action=l(`/admin/domains/${domain.id}`),
                    method="POST",
                    autocomplete="off"
                  ).ajax-form.confirm-prompt.btn-group
                    input(type="hidden", name="_csrf", value=ctx.csrf)
                    input(type="hidden", name="_method", value="DELETE")
                    button(
                      type="submit",
                      data-toggle="tooltip",
                      data-title=t("Remove")
                    ).btn.btn-secondary: i.fa.fa-fw.fa-remove
+paginate('#table-domains')
